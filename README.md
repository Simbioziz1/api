# Задание по API
Автор: Simbioziz@gmail.com

Реализация доступа к информации пользователей

Установка
---
Клонировать репозиторий в папку web-сервера, создать в ДБ MySQL базу, 
импортировать данные из дампа test.sql
Прописать пользователя, имеющего доступ к данной БД и его пароль в файле MyApi.php проекта

private $dbName;
private $dbHost;
private $dbUser;
private $dbPassword;

Тестовое задание (ТЗ к заданию)
---
Реализовать приложение — API для доступа к пользовательским данным через веб. Данные
пользователей хранятся в БД. У каждого пользователя есть nick, login и email.
Функциональность
приложения: 1. Обязательно
— получение списка пользователей по критерию (nick, login, email), GETзапрос
— получение пользователя по id, GETзапрос
— обновление пользователя (изменение ника, email), POSTзапрос
— выбор типа возвращаемых данных (json или xml, по выбору клиентского приложения)
2. Опционально
— доступ к API только авторизованному клиентскому приложению
— кастомные страницы 404й и 500й ошибок
— механизм переключения окружения (development, production)
Дополнительное задание:
Представьте, что суточная нагрузка на приложение составит 5 000 000 хитов.
Опишите предполагаемое окружение и необходимые сервисы, которые
могут понадобиться, чтобы выдержать подобную нагрузку.
Решение задания должно быть в виде репозитория на github, с инструкцией по запуску
и установке. Язык программирования для выполнения задания - PHP.

----
В рамках данного API реализована обязательная часть ТЗ 
+ авторизация
+ при ошибках вывод сообщения от api

Структура запросов

Структура запроса должна иметь следующий вид:
http://путь_до_файлов/тип_данных_ответа/имя_функции/?параметры&key='значение_токена'

путь_до_файлов по умолчанию будет иметь вид /api/v1/
тип_данных_ответа может принимать значение json или xml
имя_функции может принимать значения getuser или setuser

параметры для getuser
функция принимает параметры nick,id,login,email  - параметры могут передоваться как по отдельности, так и в произвольной комбинации
функция имеет возможность вывода только требуемых полей. Для этого, кроме основных параметров, передается параметр fields. fields может принимать значения id,nick,login,email.
Пример: http://localhost/api/v1/xml/getuser/&id=2&fields=id,nick

параметры для setuser
Функция принимает параметры id,login,email. id - является обязательным параметром и указывает на изменяемого пользователя. login, email - может передаваться один или два параметра сразу.

параметр key - ОБЯЗАТЕЛЬНЫЙ ПАРАМЕТР
В key передается токен, по которому API допускает приложение на выполнение функций. Токены хранятся в таблице token, зашифрованные в md5. На данный момент в таблице существует один токен - Vitaliy
Пример: http://ваш_запрос/?параметры&key=Vitaliy

Структура файлов
_________________
index.php - точка входа в API. Производит создание класса.
MyApi.php - содержит в себе пользовательские функции getuser,setuser. Производит авторизацию и работу с БД
API.class.php - содержит основную логику API. Отвечает за интерфейс обращения к пользовательским функциям

Логика работы
______________
.htaccess производит редирект данных в index.php. index.php создает экземпляр класса MyAPI, наследующий  класс API. Конструктор API разбирает полученные данные и вызывает функции из MyAPI. Функции MyAPI производят обращение к базе и передают полученный массив данных в функцию вывода класса API.

Тестировалось на PHP 5.6.5

